<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>160-设计模式.html</title>
</head>
<body>
	
</body>
<script>
	(function(w){
       function Teacher(){
       	this.name = name;
       	this.students = [];
       }
       Teacher.prototype = {
       	constructor:Teacher,
       	register:function(Student){
           this.students.push(Student);
       	},
       	publish:function(task){
       		for(var i = 0;i<this.students.length;i++){
                this.students[i].listen(task);
       		}
       	}
    }
       w.Teacher = Teacher;
       
	})(window);




	(function(w){
        function Student(name,Teacher){
            this.name = name;
            Teacher.register(this);

        }
        Student.prototype = {
        	constructor:Student,
        	listen:function(task){
            console.log(this.name + 'got task:' + task);
        }
    }
        
	    w.Student = Student;

	})(window);

	var t1 = new Teacher('Tom');
	var s1 = new Student('Leo',t1);
	var s2 = new Student('jake',t1);
	t1.publish('coding...')
	console.log(t1);
	console.log(s1);

</script>
</html>